<!DOCTYPE html>
<html lang="zh-Hant-TW">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Squid Game</title>
  <style>
    /* 重置預設 */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    /* 設定body長寬與背景圖 */
    body {
      width: 100vw;
      height: 100vh;
      background: url('./images/background.jpg') no-repeat center center/cover;
    }

    /* 設定遊戲操作區 */
    #container {
      width: 1600px;
      height: 900px;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
    }

    /* 設定中間資訊區 */
    #info {
      width: 1600px;
      height: 420px;
      position: relative;
    }

    /* 設定汗滴與動畫影格 */
    .sweat {
      position: absolute;
      top: 50%;
      left: 4%;
      animation: sweat 5s linear infinite;
    }

    @keyframes sweat {
      0% {
        opacity: 0;
      }

      25% {
        transform: translateY(100%);
        opacity: 1;
      }

      100% {
        transform: translateY(100%);
      }
    }

    /* 設定OS與動畫影格 */
    .cloud-left {
      position: absolute;
      top: 6%;
      left: 10.8%;
      animation: cloud 5s linear infinite;
    }

    .cloud-right {
      position: absolute;
      top: 6%;
      right: 9.4%;
      animation: cloud 5s .5s linear infinite;
    }

    @keyframes cloud {
      0% {
        opacity: 0;
      }

      25% {
        transform: translateY(-10%);
        opacity: 1;
      }

      100% {
        transform: translateY(-10%);
      }
    }

    /* 設定苦惱線與動畫影格 */
    .messline {
      position: absolute;
      top: 43.5%;
      right: 3.3%;
      animation: messline 0.5s linear infinite;
    }

    @keyframes messline {
      50% {
        transform: rotate(-10deg);
        opacity: 1;
      }
    }

    /* 設定上下方卡片區 */
    #top-cards,
    #bottom-cards {
      width: 1600px;
      height: 240px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .shape-card,
    .name-card {
      width: 180px;
      height: 220px;
      /* 設定子元素在 3D 空間內 */
      transform-style: preserve-3d;
      transition: transform 1s;
    }

    .front-shape,
    .front-name {
      width: 100%;
      height: 100%;
      position: absolute;
      /* Y軸旋轉，因為原本 卡片正面 跟 卡片背面 的圖樣都是朝上，所以要讓「正面」「背面」背對背，這樣 3D 旋轉時才能都看到圖樣那一面 */
      transform: rotateY(180deg);
      /* 翻過來後隱藏另一面 */
      backface-visibility: hidden;
    }

    .back-shape {
      width: 100%;
      height: 100%;
      background-image: url('./images/back_shape.png');
      position: absolute;
      /* 翻過來後隱藏另一面 */
      backface-visibility: hidden;
    }

    .back-name {
      width: 100%;
      height: 100%;
      background-image: url('./images/back_name.png');
      position: absolute;
      /* 翻過來後隱藏另一面 */
      backface-visibility: hidden;
    }
  </style>
</head>

<body>
  <div id="container">
    <div id="top-cards"></div>
    <div id="info">
      <img src="./images/title.png" alt="title">
      <img class="sweat" src="./images/sweat.png" alt="sweat">
      <img class="cloud-left" src="./images/cloud-left.png" alt="cloud-left">
      <img class="cloud-right" src="./images/cloud-right.png" alt="cloud-right">
      <img class="messline" src="./images/messline.png" alt="messline">
    </div>
    <div id="bottom-cards"></div>
  </div>
  <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.js'></script>
  <script>
    // 產生上排 7 張卡片
    for (let i = 0; i < 7; i++) {
      $("#top-cards").append(`
        <div class="shape-card">
          <div class="front-shape"></div>
          <div class="back-shape"></div>
        </div>
      `)
    }

    // 產生下排 7 張卡片
    for (let i = 0; i < 7; i++) {
      $("#bottom-cards").append(`
        <div class="name-card">
          <div class="front-name"></div>
          <div class="back-name"></div>
        </div>
      `)
    }

    // 將上排卡片加入正面花色與打散順序
    for (let i = 0; i < 7; i++) {
      const num = i % 7 + 1
      // 加入上排正面花色
      $(".shape-card").eq(i).find(".front-shape").css("background-image", `url(./images/front_shape${num}.png)`)
      $(".shape-card").eq(i).attr("data-card", num)

      // 打散上排卡片順序
      const target = Math.round(Math.random() * 6)
      $(".shape-card").eq(target).insertAfter($(".shape-card").eq(i))
    }

    // 將下排卡片加入正面花色與打散順序
    for (let i = 0; i < 7; i++) {
      const num = i % 7 + 1
      // 加入下排正面花色
      $(".name-card").eq(i).find(".front-name").css("background-image", `url(./images/front_name${num}.png)`)
      $(".name-card").eq(i).attr("data-card", num)

      // 打散下排卡片順序
      const target = Math.round(Math.random() * 6)
      $(".name-card").eq(target).insertAfter($(".name-card").eq(i))
    }
  </script>
</body>

</html>